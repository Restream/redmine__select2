!function(a,b){"use strict";a.rails!==b&&a.error("jquery-ujs has already been loaded!");var c,d=a(document);a.rails=c={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]), textarea[name][required]:not([disabled])",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return a("meta[name=csrf-token]").attr("content")},csrfParam:function(){return a("meta[name=csrf-param]").attr("content")},CSRFProtection:function(a){var b=c.csrfToken();b&&a.setRequestHeader("X-CSRF-Token",b)},refreshCSRFTokens:function(){a('form input[name="'+c.csrfParam()+'"]').val(c.csrfToken())},fire:function(b,c,d){var e=a.Event(c);return b.trigger(e,d),e.result!==!1},confirm:function(a){return confirm(a)},ajax:function(b){return a.ajax(b)},href:function(a){return a[0].href},isRemote:function(a){return a.data("remote")!==b&&a.data("remote")!==!1},handleRemote:function(d){var e,f,g,h,i,j;if(c.fire(d,"ajax:before")){if(h=d.data("with-credentials")||null,i=d.data("type")||a.ajaxSettings&&a.ajaxSettings.dataType,d.is("form")){e=d.data("ujs:submit-button-formmethod")||d.attr("method"),f=d.data("ujs:submit-button-formaction")||d.attr("action"),g=a(d[0]).serializeArray();var k=d.data("ujs:submit-button");k&&(g.push(k),d.data("ujs:submit-button",null)),d.data("ujs:submit-button-formmethod",null),d.data("ujs:submit-button-formaction",null)}else d.is(c.inputChangeSelector)?(e=d.data("method"),f=d.data("url"),g=d.serialize(),d.data("params")&&(g=g+"&"+d.data("params"))):d.is(c.buttonClickSelector)?(e=d.data("method")||"get",f=d.data("url"),g=d.serialize(),d.data("params")&&(g=g+"&"+d.data("params"))):(e=d.data("method"),f=c.href(d),g=d.data("params")||null);return j={type:e||"GET",data:g,dataType:i,beforeSend:function(a,e){return e.dataType===b&&a.setRequestHeader("accept","*/*;q=0.5, "+e.accepts.script),!!c.fire(d,"ajax:beforeSend",[a,e])&&void d.trigger("ajax:send",a)},success:function(a,b,c){d.trigger("ajax:success",[a,b,c])},complete:function(a,b){d.trigger("ajax:complete",[a,b])},error:function(a,b,c){d.trigger("ajax:error",[a,b,c])},crossDomain:c.isCrossDomain(f)},h&&(j.xhrFields={withCredentials:h}),f&&(j.url=f),c.ajax(j)}return!1},isCrossDomain:function(a){var b=document.createElement("a");b.href=location.href;var c=document.createElement("a");try{return c.href=a,c.href=c.href,!((!c.protocol||":"===c.protocol)&&!c.host||b.protocol+"//"+b.host==c.protocol+"//"+c.host)}catch(a){return!0}},handleMethod:function(d){var e=c.href(d),f=d.data("method"),g=d.attr("target"),h=c.csrfToken(),i=c.csrfParam(),j=a('<form method="post" action="'+e+'"></form>'),k='<input name="_method" value="'+f+'" type="hidden" />';i===b||h===b||c.isCrossDomain(e)||(k+='<input name="'+i+'" value="'+h+'" type="hidden" />'),g&&j.attr("target",g),j.hide().append(k).appendTo("body"),j.submit()},formElements:function(b,c){return b.is("form")?a(b[0].elements).filter(c):b.find(c)},disableFormElements:function(b){c.formElements(b,c.disableSelector).each(function(){c.disableFormElement(a(this))})},disableFormElement:function(a){var c,d;c=a.is("button")?"html":"val",d=a.data("disable-with"),d!==b&&(a.data("ujs:enable-with",a[c]()),a[c](d)),a.prop("disabled",!0),a.data("ujs:disabled",!0)},enableFormElements:function(b){c.formElements(b,c.enableSelector).each(function(){c.enableFormElement(a(this))})},enableFormElement:function(a){var c=a.is("button")?"html":"val";a.data("ujs:enable-with")!==b&&(a[c](a.data("ujs:enable-with")),a.removeData("ujs:enable-with")),a.prop("disabled",!1),a.removeData("ujs:disabled")},allowAction:function(a){var e,b=a.data("confirm"),d=!1;if(!b)return!0;if(c.fire(a,"confirm")){try{d=c.confirm(b)}catch(a){(console.error||console.log).call(console,a.stack||a)}e=c.fire(a,"confirm:complete",[d])}return d&&e},blankInputs:function(b,c,d){var f,g,h,i,e=a(),j=c||"input,textarea",k=b.find(j),l={};return k.each(function(){f=a(this),f.is("input[type=radio]")?(i=f.attr("name"),l[i]||(0===b.find('input[type=radio]:checked[name="'+i+'"]').length&&(h=b.find('input[type=radio][name="'+i+'"]'),e=e.add(h)),l[i]=i)):(g=f.is("input[type=checkbox],input[type=radio]")?f.is(":checked"):!!f.val(),g===d&&(e=e.add(f)))}),!!e.length&&e},nonBlankInputs:function(a,b){return c.blankInputs(a,b,!0)},stopEverything:function(b){return a(b.target).trigger("ujs:everythingStopped"),b.stopImmediatePropagation(),!1},disableElement:function(a){var d=a.data("disable-with");d!==b&&(a.data("ujs:enable-with",a.html()),a.html(d)),a.bind("click.railsDisable",function(a){return c.stopEverything(a)}),a.data("ujs:disabled",!0)},enableElement:function(a){a.data("ujs:enable-with")!==b&&(a.html(a.data("ujs:enable-with")),a.removeData("ujs:enable-with")),a.unbind("click.railsDisable"),a.removeData("ujs:disabled")}},c.fire(d,"rails:attachBindings")&&(a.ajaxPrefilter(function(a,b,d){a.crossDomain||c.CSRFProtection(d)}),a(window).on("pageshow.rails",function(){a(a.rails.enableSelector).each(function(){var b=a(this);b.data("ujs:disabled")&&a.rails.enableFormElement(b)}),a(a.rails.linkDisableSelector).each(function(){var b=a(this);b.data("ujs:disabled")&&a.rails.enableElement(b)})}),d.on("ajax:complete",c.linkDisableSelector,function(){c.enableElement(a(this))}),d.on("ajax:complete",c.buttonDisableSelector,function(){c.enableFormElement(a(this))}),d.on("click.rails",c.linkClickSelector,function(b){var d=a(this),e=d.data("method"),f=d.data("params"),g=b.metaKey||b.ctrlKey;if(!c.allowAction(d))return c.stopEverything(b);if(!g&&d.is(c.linkDisableSelector)&&c.disableElement(d),c.isRemote(d)){if(g&&(!e||"GET"===e)&&!f)return!0;var h=c.handleRemote(d);return h===!1?c.enableElement(d):h.fail(function(){c.enableElement(d)}),!1}return e?(c.handleMethod(d),!1):void 0}),d.on("click.rails",c.buttonClickSelector,function(b){var d=a(this);if(!c.allowAction(d)||!c.isRemote(d))return c.stopEverything(b);d.is(c.buttonDisableSelector)&&c.disableFormElement(d);var e=c.handleRemote(d);return e===!1?c.enableFormElement(d):e.fail(function(){c.enableFormElement(d)}),!1}),d.on("change.rails",c.inputChangeSelector,function(b){var d=a(this);return c.allowAction(d)&&c.isRemote(d)?(c.handleRemote(d),!1):c.stopEverything(b)}),d.on("submit.rails",c.formSubmitSelector,function(d){var g,h,e=a(this),f=c.isRemote(e);if(!c.allowAction(e))return c.stopEverything(d);if(e.attr("novalidate")===b)if(e.data("ujs:formnovalidate-button")===b){if(g=c.blankInputs(e,c.requiredInputSelector,!1),g&&c.fire(e,"ajax:aborted:required",[g]))return c.stopEverything(d)}else e.data("ujs:formnovalidate-button",b);if(f){if(h=c.nonBlankInputs(e,c.fileInputSelector)){setTimeout(function(){c.disableFormElements(e)},13);var i=c.fire(e,"ajax:aborted:file",[h]);return i||setTimeout(function(){c.enableFormElements(e)},13),i}return c.handleRemote(e),!1}setTimeout(function(){c.disableFormElements(e)},13)}),d.on("click.rails",c.formInputClickSelector,function(b){var d=a(this);if(!c.allowAction(d))return c.stopEverything(b);var e=d.attr("name"),f=e?{name:e,value:d.val()}:null,g=d.closest("form");0===g.length&&(g=a("#"+d.attr("form"))),g.data("ujs:submit-button",f),g.data("ujs:formnovalidate-button",d.attr("formnovalidate")),g.data("ujs:submit-button-formaction",d.attr("formaction")),g.data("ujs:submit-button-formmethod",d.attr("formmethod"))}),d.on("ajax:send.rails",c.formSubmitSelector,function(b){this===b.target&&c.disableFormElements(a(this))}),d.on("ajax:complete.rails",c.formSubmitSelector,function(b){this===b.target&&c.enableFormElements(a(this))}),a(function(){c.refreshCSRFTokens()}))}(jQuery);